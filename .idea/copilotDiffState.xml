<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/main.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/main.py" />
              <option name="originalContent" value="import time&#10;from pico2d import *&#10;from game_logic import *&#10;import game_logic.framework as framework&#10;&#10;# 레이어 기반 월드: 배경, 엔티티, UI, 커서(최상단)&#10;world = {&#10;    'bg': [],        # 배경 레이어&#10;    'entities': [],  # 플레이어/몬스터 등 엔티티 레이어&#10;    'ui': [],        # 인벤토리 등 UI 레이어&#10;    'cursor': []     # 커서 레이어 (항상 최상단)&#10;}&#10;&#10;running = True&#10;current_time = time.time()&#10;&#10;&#10;def handle_events():&#10;    global running&#10;&#10;    event_list = get_events()&#10;    for event in event_list:&#10;        if event.type == SDL_QUIT:&#10;            running = False&#10;        elif event.type == SDL_KEYDOWN and event.key == SDLK_ESCAPE:&#10;            running = False&#10;        else:&#10;            # 엔티티, UI, 커서 순으로 이벤트 브로드캐스트&#10;            for o in world['entities']:&#10;                if hasattr(o, 'handle_event'):&#10;                    o.handle_event(event)&#10;            for o in world['ui']:&#10;                if hasattr(o, 'handle_event'):&#10;                    o.handle_event(event)&#10;            for o in world['cursor']:&#10;                if hasattr(o, 'handle_event'):&#10;                    o.handle_event(event)&#10;&#10;&#10;def reset_world():&#10;    # 레이어 초기화&#10;    world['bg'].clear()&#10;    world['entities'].clear()&#10;    world['ui'].clear()&#10;    world['cursor'].clear()&#10;&#10;    # 배경 오브젝트가 있다면 world['bg'].append(Background()) 형태로 추가&#10;&#10;    # 엔티티: 플레이어&#10;    player = Player()&#10;    world['entities'].append(player)&#10;&#10;    # UI: 인벤토리 오버레이(플레이어 상태 기반)&#10;    inv_overlay = InventoryOverlay(player)&#10;    world['ui'].append(inv_overlay)&#10;&#10;    # 커서: 최상단 레이어에 추가 (player 참조 전달)&#10;    cursor = Cursor(player)&#10;    world['cursor'].append(cursor)&#10;&#10;&#10;def update_world():&#10;    # 배경 → 엔티티 → UI → 커서 순으로 업데이트&#10;    for layer_name in ['bg', 'entities', 'ui', 'cursor']:&#10;        for o in world[layer_name]:&#10;            if hasattr(o, 'update'):&#10;                o.update()&#10;&#10;&#10;def render_world():&#10;    clear_canvas()&#10;    # 배경 → 엔티티 → UI → 커서 순으로 그리기 (커서가 최상단)&#10;    for layer_name in ['bg', 'entities', 'ui', 'cursor']:&#10;        for o in world[layer_name]:&#10;            if hasattr(o, 'draw'):&#10;                o.draw()&#10;    update_canvas()&#10;&#10;&#10;open_canvas()&#10;reset_world()&#10;&#10;# game loop&#10;while running:&#10;    last_time = current_time&#10;    current_time = time.time()&#10;    delta_time = current_time - last_time&#10;&#10;    # 전역 delta_time 업데이트&#10;    framework.set_delta_time(delta_time)&#10;&#10;    handle_events()&#10;    update_world()&#10;    render_world()&#10;&#10;# finalization code&#10;close_canvas()" />
              <option name="updatedContent" value="import time&#10;from pico2d import *&#10;from game_logic import *&#10;import game_logic.framework as framework&#10;&#10;# 레이어 기반 월드: 배경, 엔티티, UI, 커서(최상단)&#10;world = {&#10;    'bg': [],        # 배경 레이어&#10;    'entities': [],  # 플레이어/몬스터 등 엔티티 레이어&#10;    'ui': [],        # 인벤토리 등 UI 레이어&#10;    'cursor': []     # 커서 레이어 (항상 최상단)&#10;}&#10;&#10;running = True&#10;current_time = time.time()&#10;&#10;&#10;def handle_events():&#10;    global running&#10;&#10;    event_list = get_events()&#10;    for event in event_list:&#10;        if event.type == SDL_QUIT:&#10;            running = False&#10;        elif event.type == SDL_KEYDOWN and event.key == SDLK_ESCAPE:&#10;            running = False&#10;        else:&#10;            # 엔티티, UI, 커서 순으로 이벤트 브로드캐스트&#10;            for o in world['entities']:&#10;                if hasattr(o, 'handle_event'):&#10;                    o.handle_event(event)&#10;            for o in world['ui']:&#10;                if hasattr(o, 'handle_event'):&#10;                    o.handle_event(event)&#10;            for o in world['cursor']:&#10;                if hasattr(o, 'handle_event'):&#10;                    o.handle_event(event)&#10;&#10;&#10;def reset_world():&#10;    # 레이어 초기화&#10;    world['bg'].clear()&#10;    world['entities'].clear()&#10;    world['ui'].clear()&#10;    world['cursor'].clear()&#10;&#10;    # 배경 오브젝트가 있다면 world['bg'].append(Background()) 형태로 추가&#10;&#10;    # 엔티티: 플레이어&#10;    player = Player()&#10;    world['entities'].append(player)&#10;&#10;    # UI: 인벤토리 오버레이(플레이어 상태 기반)&#10;    inv_overlay = InventoryOverlay(player)&#10;    world['ui'].append(inv_overlay)&#10;&#10;    # 커서: 최상단 레이어에 추가 (player 참조 전달)&#10;    cursor = Cursor(player)&#10;    world['cursor'].append(cursor)&#10;&#10;&#10;def update_world():&#10;    # 배경 → 엔티티 → UI → 커서 순으로 업데이트&#10;    for layer_name in ['bg', 'entities', 'ui', 'cursor']:&#10;        for o in world[layer_name]:&#10;            if hasattr(o, 'update'):&#10;                o.update()&#10;&#10;&#10;def render_world():&#10;    clear_canvas()&#10;    # 배경 → 엔티티 → UI → 커서 순으로 그리기 (커서가 최상단)&#10;    for layer_name in ['bg', 'entities', 'ui', 'cursor']:&#10;        for o in world[layer_name]:&#10;            if hasattr(o, 'draw'):&#10;                o.draw()&#10;    update_canvas()&#10;&#10;&#10;open_canvas()&#10;reset_world()&#10;&#10;# game loop&#10;while running:&#10;    last_time = current_time&#10;    current_time = time.time()&#10;    delta_time = current_time - last_time&#10;&#10;    # 전역 delta_time 업데이트&#10;    framework.set_delta_time(delta_time)&#10;&#10;    handle_events()&#10;    update_world()&#10;    render_world()&#10;&#10;# finalization code&#10;close_canvas()" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>